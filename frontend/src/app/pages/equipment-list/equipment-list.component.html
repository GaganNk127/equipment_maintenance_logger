<div class="container">
    <div class="header-actions">
        <h2>Equipment List</h2>
        <a routerLink="/register" class="btn btn-primary">
            <span>+ Register New</span>
        </a>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

    <div *ngIf="isLoading" class="loading-state">
        <p>Loading equipment...</p>
    </div>

    <div *ngIf="!isLoading && equipmentList.length === 0" class="empty-state">
        <p>No equipment found. Register your first equipment!</p>
    </div>

    <div class="table-responsive" *ngIf="!isLoading && equipmentList.length > 0">
        <table class="equipment-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Serial Number</th>
                    <th>Last Service</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of equipmentList">
                    <td>
                        <a [routerLink]="['/maintenance', item._id]" class="equipment-link pointer">
                            {{ item.name }}
                        </a>
                    </td>
                    <td>{{ item.serialNumber }}</td>
                    <td>{{ item.lastServiceDate | date:'mediumDate' }}</td>
                    <td>
                        <span class="badge" [ngClass]="getStatusClass(item.status)">
                            {{ item.status }}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons-cell">
                            <button class="btn btn-sm btn-outline" (click)="openMaintenanceModal(item._id!)">
                                Log Maintenance
                            </button>
                            <a class="btn btn-sm btn-secondary" [routerLink]="['/maintenance', item._id]">
                                History
                            </a>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <app-maintenance-modal [isOpen]="isModalOpen" [equipmentId]="selectedEquipmentId" (close)="closeMaintenanceModal()"
        (save)="onMaintenanceSaved()">
    </app-maintenance-modal>
</div>